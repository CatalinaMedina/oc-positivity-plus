---
title: "Factors associated with seroprevelance of SARS-CoV2 in Orange County"
output: 
  pdf_document:
    extra_dependencies:
      amsmath 
params:
  reclean_data: FALSE
  first_test_date: "2020-03-01"
  last_test_date: "2020-08-16"
  refit_model1: FALSE
  refit_model2: FALSE
  refit_model3: FALSE
  refit_model4: FALSE
  refit_model5: FALSE
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, 
                      message = FALSE, 
                      error = FALSE,
                      fig.pos = "H")
```


```{r loading-libraries}
# data-wrangling-function chunk
library(tidyverse)
library(here)
library(lubridate)
library(data.table)
# missing-data-table chunk
library(knitr)
library(kableExtra)
# fit-model1 chunk
library(tictoc)
library(lme4)
library(BRRR)
library(car) # I don't think I need this anymore
library(mgcv)
```


```{r load-clean-data}
if (params$reclean_data) {
  all_sero_and_zip <- read_all_pcr(
    file_path = here("data/seroprevelance-data", "oc-seroprevelence-data-2020-08-01.csv"),
    start_date = params$first_test_date,
    end_date = params$last_test_date
    )
  
  save(all_sero_and_zip, file = here("data/seroprevelance-data", "cleaned_process_sero_data.Rdata"))
  
} 

load(file = here("data/seroprevelance-data", "cleaned_process_sero_data.Rdata"))
  
all_sero <- data.frame(all_sero_and_zip[["pcr_results_merged"]])
all_zip <- data.frame(all_sero_and_zip[["zip_data_merged"]])
all_missing <- all_sero_and_zip[["missing"]]
all_inconsist_ids <- all_sero_and_zip[["inconsistencies"]]

```
